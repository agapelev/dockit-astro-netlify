---
import theme from "@/config/theme.json";
const { head } = Astro.locals.starlightRoute;

// font families
const pf = theme.fonts.font_family.primary;
// @ts-ignore
const sf = theme.fonts.font_family.secondary;

let fontPrimary, fontSecondary;
if (theme.fonts.font_family.primary) {
  fontPrimary = theme.fonts.font_family.primary
    .replace(/\+/g, " ")
    .replace(/:[ital,]*[ital@]*[wght@]*[0-9,;.]+/gi, "");
}
// @ts-ignore
if (theme.fonts.font_family.secondary) {
  fontSecondary = theme.fonts.font_family.secondary
    .replace(/\+/g, " ")
    .replace(/:[ital,]*[ital@]*[wght@]*[0-9,;.]+/gi, "");
}
---

<!-- ✅ Подключение локальных шрифтов -->
<link rel="stylesheet" href="/styles/fonts.css" />

<!-- ✅ Рендер мета-тегов -->
{head.map(({ tag: Tag, attrs, content }) => <Tag {...attrs} set:html={content} />)}

<!-- ❌ Отключён AstroFont (оставлен в комментарии) -->
<!--
import { AstroFont } from "astro-font";

<AstroFont
  config={[
    {
      src: [],
      preload: false,
      display: "swap",
      name: fontPrimary!,
      fallback: "sans-serif",
      cssVariable: "font-primary",
      googleFontsURL: `https://fonts.googleapis.com/css2?family=${pf}&display=swap`,
    },
    {
      src: [],
      preload: false,
      display: "swap",
      name: fontSecondary!,
      fallback: "sans-serif",
      cssVariable: "font-secondary",
      googleFontsURL: `https://fonts.googleapis.com/css2?family=${sf}&display=swap`,
    },
  ]}
/>
-->
